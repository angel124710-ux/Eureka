-- ============================================
-- PREDICT ULTRA SIMPLES - MOBILE
-- 100% funcionando, sem frescura
-- ============================================

-- Mostrar mensagem na tela
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "ðŸ”µ PREDICT",
    Text = "Sistema de prediÃ§Ã£o ativado!",
    Duration = 3
})

print("âœ… PREDICT CARREGADO - Olhe para os inimigos")

-- VariÃ¡veis
local player = game:GetService("Players").LocalPlayer
local camera = workspace.CurrentCamera
local runService = game:GetService("RunService")

-- Tabela para guardar os desenhos
local desenhos = {}

-- FunÃ§Ã£o para criar desenho
local function criarDesenho(alvo)
    if desenhos[alvo] then return end
    
    desenhos[alvo] = {
        ponto = Drawing.new("Circle"),
        linha = Drawing.new("Line"),
        ultimaPos = nil,
        ultimoTempo = tick()
    }
    
    -- Configurar ponto
    desenhos[alvo].ponto.Visible = false
    desenhos[alvo].ponto.Color = Color3.fromRGB(0, 200, 255)
    desenhos[alvo].ponto.Thickness = 2
    desenhos[alvo].ponto.NumSides = 20
    desenhos[alvo].ponto.Radius = 8
    desenhos[alvo].ponto.Filled = true
    desenhos[alvo].ponto.Transparency = 0.6
    
    -- Configurar linha
    desenhos[alvo].linha.Visible = false
    desenhos[alvo].linha.Color = Color3.fromRGB(0, 200, 255)
    desenhos[alvo].linha.Thickness = 2
    desenhos[alvo].linha.Transparency = 0.5
end

-- Loop principal
runService.RenderStepped:Connect(function()
    local agora = tick()
    
    -- Procurar personagens
    for _, obj in pairs(workspace:GetChildren()) do
        -- Verificar se Ã© um personagem
        if obj:IsA("Model") and obj:FindFirstChild("Humanoid") and obj:FindFirstChild("HumanoidRootPart") then
            local humano = obj.Humanoid
            local parte = obj.HumanoidRootPart
            
            -- Ignorar mortos e si mesmo
            if humano.Health <= 0 or obj == player.Character then
                continue
            end
            
            -- Criar desenho para ele
            criarDesenho(obj)
            
            local dados = desenhos[obj]
            local posAtual = parte.Position
            
            -- Calcular velocidade
            local velocidade = Vector3.new(0, 0, 0)
            if dados.ultimaPos then
                local tempoDiff = agora - dados.ultimoTempo
                if tempoDiff > 0 and tempoDiff < 1 then
                    velocidade = (posAtual - dados.ultimaPos) / tempoDiff
                end
            end
            
            -- Guardar posiÃ§Ã£o para prÃ³ximo frame
            dados.ultimaPos = posAtual
            dados.ultimoTempo = agora
            
            -- Calcular onde vai estar em 0.4 segundos
            local posFutura = posAtual + (velocidade * 0.4)
            
            -- Converter para posiÃ§Ã£o na tela
            local posTelaAtual, naTelaAtual = camera:WorldToViewportPoint(posAtual)
            local posTelaFutura, naTelaFutura = camera:WorldToViewportPoint(posFutura)
            
            -- Mostrar na tela
            if naTelaFutura then
                dados.ponto.Visible = true
                dados.ponto.Position = Vector2.new(posTelaFutura.X, posTelaFutura.Y)
                
                if naTelaAtual then
                    dados.linha.Visible = true
                    dados.linha.From = Vector2.new(posTelaAtual.X, posTelaAtual.Y)
                    dados.linha.To = Vector2.new(posTelaFutura.X, posTelaFutura.Y)
                else
                    dados.linha.Visible = false
                end
            else
                dados.ponto.Visible = false
                dados.linha.Visible = false
            end
        end
    end
    
    -- Limpar desenhos de personagens que morreram
    for obj, dados in pairs(desenhos) do
        if not obj or not obj.Parent or not obj:FindFirstChild("Humanoid") or obj.Humanoid.Health <= 0 then
            if dados.ponto then dados.ponto:Remove() end
            if dados.linha then dados.linha:Remove() end
            desenhos[obj] = nil
        end
    end
end)

-- Limpeza
game:BindToClose(function()
    for _, dados in pairs(desenhos) do
        if dados.ponto then dados.ponto:Remove() end
        if dados.linha then dados.linha:Remove() end
    end
end)
